<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="description" content="전기차의 상태와 미래가치를 확인하는 실시간 모니터링 서비스"/>
    <meta property="og:title" content="B-Lifecare">
    <meta property="og:url" content="https://www.batterylifecare.com">
    <meta property="og:image" content="https://www.batterylifecare.com/images/challenge/kakao_sns.jpg">
    <meta property="og:description" content="전기차의 상태와 미래가치를 확인하는 실시간 모니터링 서비스"/>
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="">
    <meta name="twitter:url" content="https://www.batterylifecare.com">
    <meta name="twitter:image" content="https://www.batterylifecare.com/images/challenge/kakao_sns.jpg">
    <meta name="twitter:description" content="전기차의 상태와 미래가치를 확인하는 실시간 모니터링 서비스"/>

    <title>B-Lifecare</title>

    <link rel="stylesheet" href="../assets/css/style.css">
    <script src="../assets/js/jquery.js"></script>
    <script src="../assets/js/front.js"></script>
</head>
<body>
    <div class="wrap">
        <header class="header"></header>
        <div class="container guide">
            

            <section class="section">
                <div class="tit_wrap">
                    <h2>B-Lifecare 이용안내</h2>
                    <p class="des">스마트한 전기차 배터리 관리의 시작! B-Lifecare 지금 만나보세요.</p>
                </div>
                <div class="event">
                    선착순 한정 EVENT<br>30만원 상당 B-Checkup 무상 대여!
                </div>
                <div class="checkup">
                    <i class="car"></i>
                    <h3>B-Checkup 이란?</h3>
                    <p>
                        B-Checkup은 온보드 진단기(OBD)이며,<br>
                        내 전기차에 장착하여 차의 상태를 진단하고 <br class="br_mo">결과를 알려주는 데이터수집장치에요.<br>
                        5분 간격으로 데이터가 수집되어, <br class="br_mo">B-Lifecare 앱에서 분석된 데이터를 볼 수 있어요!
                    </p>
                    <p class="notice">
                        <i class="danger"></i>B-Chekup은 B-Lifecare의 소중한 자산입니다.<br>
                        데이터수집장치의 권리는 회사에 귀속하며, <br class="br_mo">사용자는 서비스 미 사용 시 장치 반환의 의무가 있습니다.
                    </p>
                    <button type="button" aria-haspopup="true" data-popup="service_list" class="btn_list">서비스 지원차종 확인하기<i class="arrow"></i></button>
                </div>
            </section>

            <section class="section">
                <div class="tit_wrap">
                    <h2>서비스 신청 방법은?</h2>
                    <p class="des">스마트한 내 차 배터리 관리를 도와줄 B-Lifecare! <br class="br_mo">빠르게 신청하고 더 많은 혜택을 받아보세요.<br>(추후 서비스 유료화 예정)</p>
                </div>
                <div class="list_wrap">
                    <ul>
                        <li>
                            <strong>B-Lifecare 앱 다운받기</strong>
                            <p>구글플레이스토어, 앱스토어에서 <br class="br_mo">다운 가능합니다.</p>
                        </li>
                        <li>
                            <strong>회원 가입 및 서비스 신청</strong>
                            <p>회원 가입 이후 서비스 신청이 가능합니다. <br class="br_mo">B-Lifecare 미지원차량이라면 가입 후<br>지원알림신청을 해보세요. <br class="br_mo">해당 차종 지원가능시점에 안내드립니다!</p>
                        </li>
                        <li>
                            <strong>B-Checkup 발송</strong>
                            <p>서비스 신청 접수 후, <br class="br_mo">B-Checkup(데이터 수집장치)을 발송해드립니다.</p>
                        </li>
                        <li>
                            <strong>내 차에 B-Checkup 장착</strong>
                            <p>누구나 쉽고 빠르게 장착할 수 있어요. <br class="br_mo">아래 장착방법 영상을 확인해보세요.</p>
                        </li>
                        <li>
                            <strong>B-Lifecare 서비스 이용</strong>
                            <p>B-Checkup을 통해 수집된 주행/배터리 <br class="br_mo">정보를 보며 스마트하게 관리해보세요!</p>
                        </li>
                    </ul>
                </div>
            </section>

            <section class="section">
                <div class="tit_wrap">
                    <h2>B-Checkup 장착 장법은?</h2>
                    <p class="des">누구나 쉽고 빠르게 1분이면 가능해요! <br class="br_mo">아래 가이드 동영상을 확인해주세요.</p>
                </div>
                <div class="video_wrap">
                    <video poster="../assets/img/guide/guide_thumbnail.png" controls playsinline webkit-playsinline>
                        <source src="../assets/img/guide/guide_video.mp4" type="video/mp4">
                    </video>
                </div>
            </section>


        </div>
        <footer class="footer"></footer>
    </div>

    <div id="service_list" class="pop_up" role="dialog" aria-hidden="true">
        <div class="dimmed"></div>
        <div class="pop_con">
            <div class="title">
                <h3>B-Lifecare 서비스 지원 차종</h3>
                <p><i class="tooltip"></i>하이브리드 차량은 본 서비스 이용이 불가해요.</p>
            </div>
            <ul class="pop_list">
                <li class="list_item">
                    <p>기아</p>
                    <ul>
                        <li>EV6 EV</li>
                        <li>니로 EV</li>
                        <li>봉고</li>
                        <li>쏘울 EV 2018년형</li>
                        <li>쏘울 부스터 EV</li>
                    </ul>
                </li>
                <li class="list_item">
                    <p>쉐보레</p>
                    <ul>
                        <li>볼트 EV</li>
                    </ul>
                </li>
                <li class="list_item">
                    <p>아우디</p>
                    <ul>
                        <li>e-트론</li>
                    </ul>
                </li>
                <li class="list_item">
                    <p>현대</p>
                    <ul>
                        <li>GV60</li>
                        <li>아이오닉 EV 2016 ~ 2018년형</li>
                        <li>아이오닉6</li>
                        <li>코나 EV</li>
                        <li>포터</li>
                    </ul>
                </li>
            </ul>
        </div>
        <button type="button" class="btn_close"><span class="hidden">닫기</span></button>
    </div>

    
    <script>
        $(document).ready(function(){
            // $(".btn_list").click(function(){
            //     pop_open()
            // })
            // $(".btn_close").click(()=>{
            //     pop_close()
            // })
            // $(".pop_bg").click(()=>{
            //     pop_close()
            // })
            
            let lastFocused;    // [수정] 포커스 담을 변수 추가

            // [수정] 이벤트 바인딩 문법 변경
            $(".btn_list").on("click", function(){
                lastFocused = $(this);      // [수정] 포커스 엘리먼트 할당
                pop_open()
            })

            // [수정] btn_close, pop_bg 클릭 이벤트 합치기, 이벤트 바인딩 문법 변경
            $(".btn_close, .pop_up .dimmed").on("click", ()=>{
                pop_close()
            })

            // let posY;    // [수정] posY 삭제


            function pop_open(){
                // $(".pop_up").css("display", "block").attr("aria-hidden", "false").focus();
                // $(".pop_up .title").attr("tabindex", "0");

                // posY = $(window).scrollTop();
                // $('.wrap').css('top',-posY);

                // $("html, body").addClass("no_scroll");

                /* $('body').addClass('scrollDisable').on('scroll touchmove mousewheel', function(e){
                    e.preventDefault();
                }); */


                // [수정]
                const _this = $(".pop_up");
                _this.addClass("open").attr("aria-hidden", false);
                _this.find(".title").attr("tabindex", 0).focus();

                $(".wrap").attr({"aria-hidden":true, "tabindex":-1});

                _front.noScroll(0);
            }
            function pop_close(){
                // $(".pop_up").css("display", "none").attr("aria-hidden", "true").blur();
                // $(".pop_up .title").attr("tabindex", "-1");

                // $("html, body").removeClass("no_scroll");

                // posY = $(window).scrollTop(posY);
                /* $('body').removeClass('scrollDisable').off('scroll touchmove mousewheel'); */

                // [수정]
                setTimeout(() => {
                    lastFocused.focus();
                    
                    const _this = $(".pop_up");
                    _this.removeClass("open").removeAttr("aria-hidden");
                    _this.find(".title").removeAttr("tabindex");

                    $(".wrap").removeAttr("aria-hidden tabindex");
                    
                    _front.noScroll(1);

                }, 130);

            }
        })
    </script>
</body>
</html>